
'use strict'

//......................................................................................................................

E.listen.loop = () =>
{
  //....................................................................................................................

  const unused = item => ! item.used
  const active = item => item.active
  const tested = item => item.test()
  const act = (item , index) =>
  {
    item.act()

    if (item.kill) E.listen.pool[index].used = true
  }

  //....................................................................................................................
  // part 1 . act and mark as used

  E.listen.pool
  .filter(active)
  .filter(tested)
  .forEach(act)

  //....................................................................................................................
  // part 2 . destroy used

  E.listen.pool = E.listen.pool.filter(unused)

  //....................................................................................................................
}

